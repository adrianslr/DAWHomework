
@{
    ViewBag.Title = "View";
}

<h2>@ViewBag.discussion.Title 
    <a href="/Categories/View/@ViewBag.category.CategoryID" class="btn btn-danger">Back</a>
</h2>
by <a href="/Users/Show/@ViewBag.author.Id"><b>@ViewBag.author.Email</b></a> 
in <a href="/Categories/View/@ViewBag.category.CategoryID"><b>@ViewBag.category.Name</b></a> 
at <b>@ViewBag.discussion.Date</b> 

<br /> 
<br />

<hr />
<p class="lead">@ViewBag.discussion.Text</p>
<hr />
<br />

@if(Request.IsAuthenticated)
{
    <form action="/Discussions/Reply" method="post">
        <input type="hidden" id="id" name="id" value="@ViewBag.discussion.DiscussionID" />
        
        <div class="form-group">
            <textarea id="text" class="form-control" rows="4" name="text" placeholder="Text.."></textarea>
        </div>
        <button type="submit" class="btn btn-default">Reply</button>
    </form>

    <br />
}


@foreach(var reply in ViewBag.discussion.Replies)
{
    <h4>@reply.Text</h4>
    <h6>said by <a href="/Users/Show/@reply.Author.Id"><b>@reply.Author.Email</b></a> on <b>@reply.Date</b></h6>
    <br />
}